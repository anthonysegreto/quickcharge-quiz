<html> 
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style-main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script src="employee-input.js"></script>
    <script>
      $(document).ready(function ()  {
        populateStates();
      });
    </script>
    <script>
      $(document).ready(function ()  {
        $("#phoneNumber").keydown(function (e) {
          if (e.key == "Backspace") { //TODO - if "xxx-" or "xxx-xxx-", highlight all, backspace, only 1 char will be deleted
            var phoneInput = $("#phoneNumber");
            var phoneNumberText = phoneInput.val();
            if (phoneNumberText.length == 4 || phoneNumberText.length == 8) {
              phoneInput.val(phoneNumberText.substring(0, phoneNumberText.length-1))
            }
          }
        });
        $("#phoneNumber").on('change paste input', function() {
          formatPhoneNumber();
        })
      });
    </script>
    <script>
      function handleSubmit(event)
      {
        validateInput();

        $("form#employeeInfoForm :input").each(function() {
          var input = $(this);
          console.log(input.val());
        })

        formatInputForSubmission();
        var json = jsonify();
        submitRequest(json);
        // .hover for errors?
      }
    </script>
    <title>Employee Information Portal</title> 
  </head>

  <body> 
    <h1>Input the employee's information in the following fields.</h1>
  
  <div class="container">
    <form id="employeeInfoForm" action="JavaScript:handleSubmit()">
      <div class="row">
        <div class="label">
          <label for="employeeName">Employee Name:</label>
        </div>
        <div class="field">
          <input type="text" name ="employeeName" id="employeeName" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="employeeNumber">Employee Number:</label>
        </div>
        <div class="field">
          <input type="text" name="employeeNumber" id="employeeNumber" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="phoneNumber">Phone Number:</label>
        </div>
        <div class="field">
          <input type="tel" name="phoneNumber" id="phoneNumber" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="address">Address:</label>
        </div>
        <div class="field">
          <input type="text" name="address" id="address" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="city">City:</label>
        </div>
        <div class="field">
          <input type="text" name="address" id="city" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="state">State:</label>
        </div>
        <div class="field">
          <select id="state" name="state" required> </select> 
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="zipCode">Zip Code:</label>
        </div>
        <div class="field">
          <input type="text" name="zipCode" id="zipCode" required>
        </div>
      </div>
      <div class="row">
        <div class="label">
          <label for="isCurrentEmployee">Current Employee:</label>
        </div>
        <div class="field">
          <input type="checkbox" name="isCurrentEmployee" id="isCurrentEmployee">
        </div>
      </div>

      <input type="submit" value="Submit">
    </form>
    <div name="submitStatusText" id="submitStatusText">
      
  </div>

</div>

</body>
</html>